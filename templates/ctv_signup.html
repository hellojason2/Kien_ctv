<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CTV Sign Up - ƒêƒÉng K√Ω CTV</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='images/favicon.png') }}">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/favicon.png') }}">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ctv/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ctv/login.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ctv/signup.css') }}">
</head>
<body>
    <!-- Close Button - Back to Main Page -->
    <a href="/" class="signup-close-btn" title="Quay l·∫°i trang ch√≠nh">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
    </a>

    <!-- Language Toggle -->
    <div class="login-lang-toggle" id="loginLangToggle">
        <div class="login-lang-btn" onclick="toggleLangPopup()">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="2" y1="12" x2="22" y2="12"></line>
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
            </svg>
            <span id="loginLangLabel">VI</span>
        </div>
        <div class="login-lang-popup">
            <div class="lang-option active" data-lang="vi" onclick="setLanguage('vi')">
                <span class="lang-flag">VN</span>
                <span class="lang-name">Ti·∫øng Vi·ªát</span>
                <svg class="lang-check" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
            </div>
            <div class="lang-option" data-lang="en" onclick="setLanguage('en')">
                <span class="lang-flag">US</span>
                <span class="lang-name">English</span>
                <svg class="lang-check" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
            </div>
        </div>
    </div>

    <div class="login-container">
        <div class="signup-box">
            <div class="login-logo">
                <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M50 10 L80 30 L80 70 L50 90 L20 70 L20 30 Z" stroke="#1a1a1a" stroke-width="3" fill="none"/>
                    <path d="M50 10 L50 90" stroke="#1a1a1a" stroke-width="3"/>
                    <path d="M20 30 L80 70" stroke="#1a1a1a" stroke-width="3"/>
                    <path d="M20 70 L80 30" stroke="#1a1a1a" stroke-width="3"/>
                </svg>
            </div>
            <h1 data-i18n="signup_title">ƒêƒÉng K√Ω CTV</h1>
            <p class="subtitle" data-i18n="signup_subtitle">ƒêi·ªÅn th√¥ng tin ƒë·ªÉ ƒëƒÉng k√Ω l√†m C·ªông T√°c Vi√™n</p>
            
            <!-- ID Scan Button -->
            <div class="id-scan-section">
                <button type="button" class="btn-scan-id" onclick="openIdScanner()">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                    <span data-i18n="scan_id">üì∑ Qu√©t CCCD/CMND</span>
                </button>
                <p class="scan-hint" data-i18n="scan_hint">Ch·ª•p ·∫£nh CCCD ƒë·ªÉ t·ª± ƒë·ªông ƒëi·ªÅn th√¥ng tin</p>
            </div>
            
            <form id="signupForm">
                <!-- H·ªç v√† t√™n (split into two fields) -->
                <div class="form-group" style="display: flex; gap: 12px;">
                    <div style="flex: 1;">
                        <label data-i18n="last_name">H·ªç *</label>
                        <input type="text" id="lastName" data-i18n-placeholder="last_name_placeholder" placeholder="Nh·∫≠p h·ªç" required>
                    </div>
                    <div style="flex: 1;">
                        <label data-i18n="first_name">T√™n *</label>
                        <input type="text" id="firstName" data-i18n-placeholder="first_name_placeholder" placeholder="Nh·∫≠p t√™n" required>
                    </div>
                </div>

                <!-- S·ªë ƒëi·ªán tho·∫°i -->
                <div class="form-group">
                    <label data-i18n="phone_number">S·ªë ƒëi·ªán tho·∫°i *</label>
                    <input type="tel" id="phoneNumber" data-i18n-placeholder="phone_placeholder" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i" required>
                </div>

                <!-- Email -->
                <div class="form-group">
                    <label data-i18n="email">Email</label>
                    <input type="email" id="email" data-i18n-placeholder="email_placeholder" placeholder="Nh·∫≠p email (kh√¥ng b·∫Øt bu·ªôc)">
                </div>

                <!-- ƒê·ªãa ch·ªâ -->
                <div class="form-group">
                    <label data-i18n="address">ƒê·ªãa ch·ªâ</label>
                    <input type="text" id="address" data-i18n-placeholder="address_placeholder" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ">
                </div>

                <!-- Ng√†y sinh -->
                <div class="form-group">
                    <label data-i18n="dob">Ng√†y sinh</label>
                    <input type="date" id="dob">
                </div>

                <!-- CCCD/CMND -->
                <div class="form-group">
                    <label data-i18n="id_number">S·ªë CCCD/CMND</label>
                    <input type="text" id="idNumber" data-i18n-placeholder="id_placeholder" placeholder="Nh·∫≠p s·ªë CCCD/CMND">
                </div>

                <!-- Ng∆∞·ªùi gi·ªõi thi·ªáu -->
                <div class="form-group">
                    <label data-i18n="referrer_phone">‚òéÔ∏è CTV Ng∆∞·ªùi gi·ªõi thi·ªáu (n·∫øu c√≥)</label>
                    <input type="tel" id="referrerCode" data-i18n-placeholder="referrer_phone_placeholder" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i CTV ng∆∞·ªùi gi·ªõi thi·ªáu (n·∫øu c√≥)">
                </div>

                <!-- M·∫≠t kh·∫©u -->
                <div class="form-group">
                    <label data-i18n="password">M·∫≠t kh·∫©u *</label>
                    <input type="password" id="password" data-i18n-placeholder="password_placeholder" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required>
                </div>

                <!-- X√°c nh·∫≠n m·∫≠t kh·∫©u -->
                <div class="form-group">
                    <label data-i18n="confirm_password">X√°c nh·∫≠n m·∫≠t kh·∫©u *</label>
                    <input type="password" id="confirmPassword" data-i18n-placeholder="confirm_password_placeholder" placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u" required>
                </div>

                <!-- Terms and Conditions -->
                <div class="form-group terms-group">
                    <label class="checkbox-container">
                        <input type="checkbox" id="termsCheckbox" required>
                        <span class="checkmark"></span>
                        <span class="terms-text">
                            <span data-i18n="agree_terms">T√¥i ƒë·ªìng √Ω v·ªõi</span> 
                            <a href="javascript:void(0)" onclick="openTermsModal(event)" id="viewTermsLink" data-i18n="terms_link" style="position: relative; z-index: 10;">ƒêi·ªÅu kho·∫£n v√† ƒêi·ªÅu ki·ªán</a> *
                        </span>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary" id="signupBtn" data-i18n="signup_button">ƒêƒÉng K√Ω</button>
                <div class="error-msg" id="signupError"></div>
                <div class="success-msg" id="signupSuccess"></div>
            </form>

            <div class="back-link">
                <a href="/ctv/portal" data-i18n="have_account">ƒê√£ c√≥ t√†i kho·∫£n? ƒêƒÉng nh·∫≠p</a>
            </div>
        </div>
    </div>

    <!-- Terms and Conditions Modal -->
    <div id="termsModal" class="terms-modal">
        <div class="terms-modal-content">
            <div class="terms-modal-header">
                <h2 data-i18n="terms_title">ƒêi·ªÅu Kho·∫£n v√† ƒêi·ªÅu Ki·ªán</h2>
                <button class="terms-modal-close" id="closeTermsModal">&times;</button>
            </div>
            <div class="terms-modal-body">
                <div class="terms-content">
                    <h3>ƒêI·ªÄU KHO·∫¢N V√Ä ƒêI·ªÄU KI·ªÜN C·ªòNG T√ÅC VI√äN</h3>
                    
                    <h4>1. GI·ªöI THI·ªÜU</h4>
                    <p>Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi ch∆∞∆°ng tr√¨nh C·ªông T√°c Vi√™n (CTV) c·ªßa ch√∫ng t√¥i. B·∫±ng c√°ch ƒëƒÉng k√Ω l√†m CTV, b·∫°n ƒë·ªìng √Ω tu√¢n th·ªß c√°c ƒëi·ªÅu kho·∫£n v√† ƒëi·ªÅu ki·ªán sau ƒë√¢y.</p>
                    
                    <h4>2. ƒêI·ªÄU KI·ªÜN THAM GIA</h4>
                    <p>- Ph·∫£i t·ª´ 18 tu·ªïi tr·ªü l√™n</p>
                    <p>- Cung c·∫•p th√¥ng tin ch√≠nh x√°c v√† ƒë·∫ßy ƒë·ªß</p>
                    <p>- C√≥ nƒÉng l·ª±c h√†nh vi d√¢n s·ª± ƒë·∫ßy ƒë·ªß theo quy ƒë·ªãnh c·ªßa ph√°p lu·∫≠t</p>
                    <p>- Ch·∫•p nh·∫≠n c√°c ƒëi·ªÅu kho·∫£n v√† ƒëi·ªÅu ki·ªán c·ªßa ch∆∞∆°ng tr√¨nh</p>
                    
                    <h4>3. QUY·ªÄN V√Ä NGHƒ®A V·ª§ C·ª¶A CTV</h4>
                    <p><strong>Quy·ªÅn l·ª£i:</strong></p>
                    <p>- ƒê∆∞·ª£c h∆∞·ªüng hoa h·ªìng theo ch√≠nh s√°ch c·ªßa c√¥ng ty</p>
                    <p>- ƒê∆∞·ª£c ƒë√†o t·∫°o v√† h·ªó tr·ª£ v·ªÅ s·∫£n ph·∫©m/d·ªãch v·ª•</p>
                    <p>- ƒê∆∞·ª£c s·ª≠ d·ª•ng c√°c t√†i li·ªáu marketing c·ªßa c√¥ng ty</p>
                    <p>- ƒê∆∞·ª£c x√¢y d·ª±ng m·∫°ng l∆∞·ªõi ƒë·ªôi nh√≥m v√† h∆∞·ªüng hoa h·ªìng c·∫•p d∆∞·ªõi</p>
                    
                    <p><strong>Nghƒ©a v·ª•:</strong></p>
                    <p>- Tu√¢n th·ªß c√°c quy ƒë·ªãnh v√† ch√≠nh s√°ch c·ªßa c√¥ng ty</p>
                    <p>- Cung c·∫•p th√¥ng tin ch√≠nh x√°c v·ªÅ s·∫£n ph·∫©m/d·ªãch v·ª• cho kh√°ch h√†ng</p>
                    <p>- Kh√¥ng ƒë∆∞·ª£c ph√°t t√°n th√¥ng tin sai l·ªách ho·∫∑c g√¢y ·∫£nh h∆∞·ªüng x·∫•u ƒë·∫øn uy t√≠n c√¥ng ty</p>
                    <p>- B·∫£o m·∫≠t th√¥ng tin kh√°ch h√†ng v√† c√¥ng ty</p>
                    <p>- Ch·ªãu tr√°ch nhi·ªám v·ªÅ c√°c ho·∫°t ƒë·ªông kinh doanh c·ªßa m√¨nh</p>
                    
                    <h4>4. CH√çNH S√ÅCH HOA H·ªíNG</h4>
                    <p>- Hoa h·ªìng ƒë∆∞·ª£c t√≠nh d·ª±a tr√™n doanh s·ªë th·ª±c t·∫ø c·ªßa kh√°ch h√†ng do CTV gi·ªõi thi·ªáu</p>
                    <p>- Th·ªùi gian thanh to√°n hoa h·ªìng theo quy ƒë·ªãnh c·ªßa c√¥ng ty</p>
                    <p>- C√¥ng ty c√≥ quy·ªÅn ƒëi·ªÅu ch·ªânh t·ª∑ l·ªá hoa h·ªìng theo t·ª´ng th·ªùi k·ª≥</p>
                    <p>- CTV s·∫Ω ƒë∆∞·ª£c th√¥ng b√°o tr∆∞·ªõc v·ªÅ m·ªçi thay ƒë·ªïi li√™n quan ƒë·∫øn ch√≠nh s√°ch hoa h·ªìng</p>
                    
                    <h4>5. CH·∫§M D·ª®T H·ª¢P T√ÅC</h4>
                    <p>H·ª£p t√°c c√≥ th·ªÉ ch·∫•m d·ª©t trong c√°c tr∆∞·ªùng h·ª£p sau:</p>
                    <p>- Vi ph·∫°m c√°c ƒëi·ªÅu kho·∫£n v√† ƒëi·ªÅu ki·ªán</p>
                    <p>- Cung c·∫•p th√¥ng tin sai l·ªách</p>
                    <p>- C√≥ h√†nh vi gian l·∫≠n ho·∫∑c kh√¥ng trung th·ª±c</p>
                    <p>- G√¢y ·∫£nh h∆∞·ªüng x·∫•u ƒë·∫øn uy t√≠n c√¥ng ty</p>
                    <p>- Theo y√™u c·∫ßu c·ªßa m·ªôt trong hai b√™n v·ªõi th√¥ng b√°o tr∆∞·ªõc</p>
                    
                    <h4>6. B·∫¢O M·∫¨T TH√îNG TIN</h4>
                    <p>- CTV cam k·∫øt b·∫£o m·∫≠t th√¥ng tin kh√°ch h√†ng v√† c√¥ng ty</p>
                    <p>- Kh√¥ng ƒë∆∞·ª£c chia s·∫ª th√¥ng tin kh√°ch h√†ng cho b√™n th·ª© ba</p>
                    <p>- Kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng th√¥ng tin cho m·ª•c ƒë√≠ch c√° nh√¢n ngo√†i h·ª£p t√°c v·ªõi c√¥ng ty</p>
                    
                    <h4>7. TR√ÅCH NHI·ªÜM PH√ÅP L√ù</h4>
                    <p>- CTV ch·ªãu tr√°ch nhi·ªám c√° nh√¢n v·ªÅ c√°c ho·∫°t ƒë·ªông kinh doanh c·ªßa m√¨nh</p>
                    <p>- C√¥ng ty kh√¥ng ch·ªãu tr√°ch nhi·ªám v·ªÅ c√°c tranh ch·∫•p ph√°t sinh gi·ªØa CTV v√† kh√°ch h√†ng</p>
                    <p>- M·ªçi tranh ch·∫•p s·∫Ω ƒë∆∞·ª£c gi·∫£i quy·∫øt theo ph√°p lu·∫≠t Vi·ªát Nam</p>
                    
                    <h4>8. ƒêI·ªÄU KHO·∫¢N CHUNG</h4>
                    <p>- C√°c ƒëi·ªÅu kho·∫£n n√†y c√≥ th·ªÉ ƒë∆∞·ª£c c·∫≠p nh·∫≠t theo th·ªùi gian</p>
                    <p>- CTV s·∫Ω ƒë∆∞·ª£c th√¥ng b√°o v·ªÅ m·ªçi thay ƒë·ªïi quan tr·ªçng</p>
                    <p>- Vi·ªác ti·∫øp t·ª•c tham gia sau khi c√≥ thay ƒë·ªïi ƒë·ªìng nghƒ©a v·ªõi vi·ªác ch·∫•p nh·∫≠n c√°c ƒëi·ªÅu kho·∫£n m·ªõi</p>
                    
                    <h4>9. LI√äN H·ªÜ</h4>
                    <p>N·∫øu c√≥ b·∫•t k·ª≥ th·∫Øc m·∫Øc n√†o v·ªÅ c√°c ƒëi·ªÅu kho·∫£n n√†y, vui l√≤ng li√™n h·ªá v·ªõi ch√∫ng t√¥i qua c√°c k√™nh h·ªó tr·ª£ ch√≠nh th·ª©c.</p>
                </div>
            </div>
            <div class="terms-modal-footer">
                <div class="signature-section">
                    <p class="signature-text" data-i18n="signature_agreement">B·∫±ng c√°ch k√Ω t√™n b√™n d∆∞·ªõi, t√¥i x√°c nh·∫≠n ƒë√£ ƒë·ªçc, hi·ªÉu v√† ƒë·ªìng √Ω v·ªõi t·∫•t c·∫£ c√°c ƒëi·ªÅu kho·∫£n v√† ƒëi·ªÅu ki·ªán tr√™n.</p>
                    <div class="signature-input-group">
                        <label data-i18n="signature_label">Ch·ªØ k√Ω ƒëi·ªán t·ª≠ *</label>
                        <div class="signature-pad-container">
                            <canvas id="signatureCanvas" width="400" height="120"></canvas>
                            <div class="signature-pad-placeholder" id="signaturePlaceholder" data-i18n="signature_placeholder">V·∫Ω ch·ªØ k√Ω c·ªßa b·∫°n ·ªü ƒë√¢y</div>
                        </div>
                        <button type="button" class="btn-clear-signature" id="clearSignatureBtn" data-i18n="clear_signature">X√≥a ch·ªØ k√Ω</button>
                    </div>
                    <div class="signature-date">
                        <span data-i18n="signature_date">Ng√†y:</span> <span id="currentDate"></span>
                    </div>
                </div>
                <div class="terms-modal-actions">
                    <button class="btn btn-secondary" id="cancelTermsBtn" data-i18n="cancel">H·ªßy</button>
                    <button class="btn btn-primary" id="acceptTermsBtn" data-i18n="accept_sign">Ch·∫•p nh·∫≠n v√† K√Ω</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden file input for ID scan -->
    <input type="file" id="idFileInput" accept="image/*" capture="environment" style="display: none;" onchange="handleIdImageSelected(event)">
    
    <!-- ID Scanner Modal -->
    <div id="idScannerModal" class="id-scanner-modal">
        <div class="id-scanner-content">
            <div class="id-scanner-header">
                <h3 data-i18n="scan_id_title">Qu√©t CCCD/CMND</h3>
                <button type="button" class="id-scanner-close" onclick="closeIdScanner()">&times;</button>
            </div>
            <div class="id-scanner-body">
                <div class="id-scanner-preview" id="idPreview">
                    <div class="id-scanner-placeholder">
                        <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <circle cx="8.5" cy="8.5" r="1.5"></circle>
                            <polyline points="21 15 16 10 5 21"></polyline>
                        </svg>
                        <p data-i18n="id_preview_hint">·∫¢nh CCCD s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y</p>
                    </div>
                    <img id="idPreviewImage" style="display: none; max-width: 100%; border-radius: 8px;">
                </div>
                <div class="id-scanner-actions">
                    <button type="button" class="btn-capture" onclick="document.getElementById('idFileInput').click()">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                            <circle cx="12" cy="13" r="4"></circle>
                        </svg>
                        <span data-i18n="take_photo">Ch·ª•p ·∫£nh / Ch·ªçn ·∫£nh</span>
                    </button>
                </div>
                <div class="id-scanner-status" id="idScanStatus"></div>
            </div>
            <div class="id-scanner-footer">
                <button type="button" class="btn btn-secondary" onclick="closeIdScanner()" data-i18n="cancel">H·ªßy</button>
                <button type="button" class="btn btn-primary" id="btnExtractId" onclick="extractIdData()" disabled data-i18n="extract_info">Tr√≠ch xu·∫•t th√¥ng tin</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/ctv/signup.js') }}"></script>
</body>
</html>
