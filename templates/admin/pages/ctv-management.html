<!-- CTV Management Page -->
<div class="page-section" id="page-ctv">
    <div class="header">
        <h2 data-i18n="ctv_management">CTV Management</h2>
        <div class="header-actions">
            <button class="btn btn-danger" onclick="deleteNonNumericCTVs()" style="background:#fee2e2;color:#b91c1c;border-color:#fecaca;" title="Delete all CTVs with non-numeric codes">üóëÔ∏è Clean Invalid Codes</button>
            <button class="btn btn-secondary" onclick="exportToExcel('/api/admin/ctv/export')" data-i18n="export_excel">Export Excel</button>
            <button class="btn btn-primary" onclick="showCreateCTVModal()" data-i18n="add_ctv">+ Add CTV</button>
        </div>
    </div>
    <div class="card" id="pendingRegistrationsCard" style="display:none; margin-bottom: 20px; border-left: 4px solid #f59e0b;">
        <div class="card-header" style="display:flex; justify-content:space-between; align-items:center; padding: 16px;">
            <h3 style="margin:0; font-size:18px; color:#b45309; display:flex; align-items:center; gap:8px;">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                Pending Approvals
            </h3>
            <span class="badge" style="background:#fef3c7; color:#b45309; font-size:14px;" id="pendingCountBadge">0</span>
        </div>
        <div class="card-body" style="padding-top:0;">
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Phone</th>
                            <th>Email</th>
                            <th>Referrer</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="pendingRegistrationsTableBody">
                        <!-- Pending items will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-body">
            <div style="display:flex;gap:16px;align-items:center;margin-bottom:16px;flex-wrap:wrap">
                <div class="search-box" style="margin-bottom:0;flex:1;min-width:200px">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                    <input type="text" id="ctvSearch" data-i18n-placeholder="search_placeholder" placeholder="Search by name, email, phone...">
                </div>
                <label class="toggle-switch" style="display:flex;align-items:center;gap:8px;cursor:pointer">
                    <input type="checkbox" id="showInactiveCTV" onchange="loadCTVList()">
                    <span class="toggle-slider"></span>
                    <span data-i18n="show_inactive">Show Inactive</span>
                </label>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th data-i18n="code">Code</th>
                            <th data-i18n="name">Name</th>
                            <th data-i18n="email">Email</th>
                            <th data-i18n="phone">Phone</th>
                            <th data-i18n="referrer">Referrer</th>
                            <th data-i18n="level">Level</th>
                            <th data-i18n="status">Status</th>
                            <th data-i18n="actions">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="ctvTableBody">
                        <tr><td colspan="8" class="loading" data-i18n="loading">Loading...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

