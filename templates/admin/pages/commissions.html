<!-- Commissions Page -->
<div class="page-section" id="page-commissions">
    <div class="header">
        <h2 data-i18n="commission_reports">Hoa Hồng</h2>
        <div class="header-actions">
            <button class="btn btn-secondary" onclick="exportCommissionsExcel()" data-i18n="export_excel">Export Excel</button>
        </div>
    </div>
    <div class="card">
        <div class="card-body">
            <!-- Quick Filter Buttons -->
            <div class="date-filter-section">
                <label class="filter-label" data-i18n="quick_filters">Quick Filters</label>
                <div class="quick-filter-buttons">
                    <button class="quick-filter-btn" data-filter="day" data-i18n="today">Today</button>
                    <button class="quick-filter-btn" data-filter="3day" data-i18n="last_3_days">Last 3 Days</button>
                    <button class="quick-filter-btn" data-filter="week" data-i18n="this_week">This Week</button>
                    <button class="quick-filter-btn" data-filter="month" data-i18n="this_month">This Month</button>
                    <button class="quick-filter-btn" data-filter="3month" data-i18n="last_3_months">Last 3 Months</button>
                    <button class="quick-filter-btn" data-filter="year" data-i18n="this_year">This Year</button>
                </div>
            </div>

            <!-- Custom Date Range -->
            <div class="date-filter-section" style="margin-top: 20px;">
                <label class="filter-label" data-i18n="custom_date_range">Custom Date Range</label>
                <div class="custom-date-range">
                    <div class="form-group" style="flex:1; min-width:150px;">
                        <label data-i18n="date_from">From Date</label>
                        <input type="date" id="commissionDateFrom" class="date-input">
                    </div>
                    <div class="form-group" style="flex:1; min-width:150px;">
                        <label data-i18n="date_to">To Date</label>
                        <input type="date" id="commissionDateTo" class="date-input">
                    </div>
                    <div class="form-group" style="flex:0 0 auto; min-width:100px; align-self:flex-end;">
                        <button class="btn btn-primary" onclick="applyCustomDateRange()" data-i18n="apply">Apply</button>
                    </div>
                </div>
            </div>
            <!-- Grand Total Summary -->
            <div id="commissionGrandTotal" style="display:flex; gap:20px; margin-bottom:20px; padding:16px; background:var(--bg-tertiary); border-radius:12px; flex-wrap:wrap;">
                <div style="flex:1; min-width:120px; max-width:200px;">
                    <div style="font-size:13px; color:var(--text-secondary); margin-bottom:4px;">Tổng CTV</div>
                    <div id="totalCtvCount" style="font-size:18px; font-weight:700; color:var(--text-primary); word-break:break-word; overflow-wrap:break-word;">0</div>
                </div>
                <div style="flex:1; min-width:120px; max-width:250px;">
                    <div id="totalRevenueLabel" style="font-size:13px; color:var(--text-secondary); margin-bottom:4px;">Tổng Dịch Vụ</div>
                    <div id="grandTotalService" style="font-size:16px; font-weight:700; color:var(--text-primary); word-break:break-word; overflow-wrap:break-word; line-height:1.3;">0</div>
                    <div id="grandTotalServiceCount" style="font-size:12px; color:var(--text-secondary); margin-top:4px; display:none;">
                        <span id="serviceCountBadge" style="background:var(--accent-blue, #3b82f6); color:white; padding:2px 8px; border-radius:4px; font-weight:600;"></span>
                    </div>
                </div>
                <div style="flex:1; min-width:120px; max-width:250px;">
                    <div style="font-size:13px; color:var(--text-secondary); margin-bottom:4px;">Tổng Hoa Hồng</div>
                    <div id="grandTotalCommission" style="font-size:16px; font-weight:700; color:var(--accent-green); word-break:break-word; overflow-wrap:break-word; line-height:1.3;">0</div>
                </div>
            </div>
            <div class="table-container">
                <table class="commissions-table">
                    <thead>
                        <tr>
                            <th style="width:12%; min-width:100px;">Mã CTV</th>
                            <th style="width:25%; min-width:150px;">Tên CTV</th>
                            <th style="width:15%; min-width:120px;">SĐT</th>
                            <th style="width:24%; min-width:180px; text-align:right;">Tổng Dịch Vụ</th>
                            <th style="width:24%; min-width:180px; text-align:right;">Tổng Hoa Hồng</th>
                        </tr>
                    </thead>
                    <tbody id="commissionsTableBody">
                        <tr><td colspan="5" class="loading" data-i18n="loading">Loading...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

