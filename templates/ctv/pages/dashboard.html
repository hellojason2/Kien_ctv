<!-- CTV Portal - Dashboard Page -->
<div class="page-section active" id="page-dashboard">
    <!-- Phone Check Card -->
    <div class="phone-check-card">
        <h3 style="margin-bottom:16px;font-size:16px;font-weight:600;" data-i18n="phone_check_title"></h3>
        <div class="phone-check-row">
            <input type="tel" id="dashPhoneInput" data-i18n-placeholder="phone_check_placeholder">
            <button class="btn-filter" onclick="checkPhonePortal()" data-i18n="check"></button>
            <div class="result" id="dashPhoneResult" style="display:none;"></div>
        </div>
    </div>

    <!-- Main CTA Button with Notification Badge -->
    <div class="cta-action-container" style="margin-bottom: 24px;">
        <button class="cta-action-btn" onclick="navigateToPage('clients')">
            <span class="cta-icon">■</span>
            <span class="cta-text" data-i18n="introduce_customer">Giới thiệu khách</span>
            <span class="cta-badge" id="referralBadge" style="display: none;">0</span>
        </button>
    </div>

    <style>
        .cta-action-container {
            width: 100%;
        }

        .cta-action-btn {
            width: 100%;
            padding: 24px 32px;
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
            border: none;
            border-radius: 20px;
            color: white;
            font-size: 20px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 14px;
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.35);
            position: relative;
            overflow: visible;
        }

        .cta-action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(99, 102, 241, 0.45);
        }

        .cta-action-btn:active {
            transform: translateY(0);
        }

        .cta-icon {
            font-size: 18px;
        }

        .cta-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            min-width: 28px;
            height: 28px;
            padding: 0 8px;
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            border-radius: 14px;
            font-size: 14px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
            animation: badgePulse 2s ease infinite;
            border: 3px solid #e8e8e8;
        }

        @keyframes badgePulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.08);
            }
        }
    </style>

    <!-- Date Filter Card -->
    <div class="card" style="margin-bottom: 20px;">
        <div class="card-body" style="padding: 16px;">
            <div class="date-filter-row" style="display: flex; flex-wrap: wrap; gap: 8px; align-items: center;">
                <!-- Quick Filter Buttons -->
                <button class="btn-filter-preset active" data-preset="today" onclick="applyDashboardPreset('today')"
                    data-i18n="today"><span class="data-indicator"></span></button>
                <button class="btn-filter-preset" data-preset="3days" onclick="applyDashboardPreset('3days')"
                    data-i18n="three_days"><span class="data-indicator"></span></button>
                <button class="btn-filter-preset" data-preset="week" onclick="applyDashboardPreset('week')"
                    data-i18n="week"><span class="data-indicator"></span></button>
                <button class="btn-filter-preset" data-preset="month" onclick="applyDashboardPreset('month')"
                    data-i18n="this_month"><span class="data-indicator"></span></button>
                <button class="btn-filter-preset" data-preset="lastmonth" onclick="applyDashboardPreset('lastmonth')"
                    data-i18n="last_month"><span class="data-indicator"></span></button>
                <button class="btn-filter-preset" data-preset="3months" onclick="applyDashboardPreset('3months')"
                    data-i18n="three_months"><span class="data-indicator"></span></button>
                <button class="btn-filter-preset" data-preset="year" onclick="applyDashboardPreset('year')"
                    data-i18n="this_year"><span class="data-indicator"></span></button>
                <button class="btn-filter-preset" data-preset="custom" onclick="toggleCustomDateFilter()"
                    data-i18n="custom_range"></button>
            </div>
            <!-- Custom Date Range (hidden by default) -->
            <div id="customDateFilter" class="custom-date-filter" style="display: none; margin-top: 12px;">
                <div style="display: flex; flex-wrap: wrap; gap: 12px; align-items: center;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <label data-i18n="from_date" style="font-size: 14px; color: #666;"></label>
                        <input type="date" id="dashFromDate" class="date-input">
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <label data-i18n="to_date" style="font-size: 14px; color: #666;"></label>
                        <input type="date" id="dashToDate" class="date-input">
                    </div>
                    <button class="btn-filter" onclick="applyCustomDateFilter()" data-i18n="filter"></button>
                </div>
            </div>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-card green">
            <div class="label" data-i18n="total_earnings"></div>
            <div class="value" id="statTotalEarnings"><span class="skeleton-loader"></span></div>
        </div>
        <div class="stat-card blue">
            <div class="label" data-i18n="this_month" id="periodEarningsLabel"></div>
            <div class="value" id="statMonthlyEarnings"><span class="skeleton-loader"></span></div>
        </div>
        <div class="stat-card gold">
            <div class="label" data-i18n="network_size"></div>
            <div class="value" id="statNetworkSize"><span class="skeleton-loader"></span></div>
        </div>
        <div class="stat-card pink">
            <div class="label" data-i18n="services_this_month" id="periodServicesLabel"></div>
            <div class="value" id="statMonthlyServices"><span class="skeleton-loader"></span></div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h3 data-i18n="recent_commissions">RECENT COMMISSIONS - THIS MONTH</h3>
        </div>
        <div class="card-body">
            <div id="recentCommissions">
                <!-- Content populated by JS -->
                <div style="padding: 20px;">
                    <div class="skeleton-loader" style="height: 200px; width: 100%; border-radius: 12px;"></div>
                </div>
            </div>
        </div>
    </div>

</div>